extends RichTextLabel
class_name BookText

var part:int = 0
var part_max:int = 9
var page:int = 0
var page_max:int = 2

var book:Dictionary = {
	0:{
		0:"这是一个以医院为主题的模拟经营游戏\n\n你将扮演一名医生，治疗患有各种睡眠疾病的患者，并在为患者解除病痛的同时帮助医院发展壮大。\n\n每位患者的症状和病因都不尽相同。\n\n因压力而失眠的患者对房间解压度的需求可能是因喝咖啡而失眠的患者的2倍。\n\n反之，因喝咖啡上瘾而失眠的患者对管控的需求可能是因压力而失眠的患者的2倍，因为要帮助他们戒掉咖啡\n\n结合患者的症状和病因，为患者提供最合适的房间，以收获患者的认可。",
		1:"点击画面中的房间以决定患者的去向\n\n在已选取房间的同时点击“房间菜单”来建设房间\n\n点击“开始上班”来开始接待患者",
		2:"患者的评价越高，你收获的报酬和声望越高\n\n第1~3天不限时，请精准地接待患者\n\n第4天开始限时180s，请又快又准地接待患者\n\n当第9天结束时，你的声望值将决定医院的未来。\n\n玩得开心!\n\n(以下附游戏中出现的10种睡眠疾病的信息。)"
	},
	1:{
		0:"·失眠是最常见的睡眠障碍之一。\n
·主要表现为入睡困难、睡眠维持障碍、早醒，并且伴有日间功能障碍，如疲劳、注意力不集中、记忆力减退、情绪波动等。\n
·例如，一位上班族因为工作压力大，连续几周躺在床上翻来覆去难以入睡，即使睡着后也容易惊醒，白天工作时总是无精打采。",
		1:"·心理因素：如焦虑、抑郁、紧张、兴奋等情绪问题。例如，面临考试、失业、失恋等生活事件时，心理压力会导致失眠。\n
·环境因素：噪音、光线过强、温度不适宜等。比如住在靠近马路的房间，夜晚车辆的噪音可能干扰睡眠。\n
·不良生活习惯：睡前使用电子产品、喝咖啡或浓茶、吸烟、过度饮酒等。许多人习惯在睡前刷手机，屏幕发出的蓝光会抑制褪黑素的分泌，从而影响入睡。\n
·生理因素：身体不适，如疼痛、瘙痒、呼吸困难等。像患有关节炎的患者，关节疼痛可能会使他们在夜间难以入睡。",
		2:"·非药物治疗：包括认知行为疗法（CBT - I），这是治疗失眠的一线疗法。它主要是帮助患者调整对睡眠的不合理认知，建立良好的睡眠习惯。例如，通过限制在床上的非睡眠时间，来重建床与睡眠之间的联系。\n
·药物治疗：在医生的指导下使用药物，如苯二氮䓬类（如地西泮）、非苯二氮䓬类（如佐匹克隆）等。但这些药物都有一定的副作用，需要谨慎使用。"
	},
	2:{
		0:"梦魇是一种睡眠障碍，主要出现在快速眼动睡眠阶段。\n\n它会让人产生可怕、令人不安的梦境，通常伴随着强烈的恐惧、焦虑等情绪而惊醒。",
		1:"·心理方面：压力和焦虑是常见原因，像工作压力、考试紧张等。创伤经历也会引发，例如经历过灾难或暴力事件的人，这些记忆可能在梦中重现。情绪冲突，如长期压抑愤怒或抑郁情绪，也易导致梦魇。\n
·生理因素：睡眠环境差，如噪音、强光、温度不适会干扰睡眠。不良睡眠姿势，如趴着睡导致呼吸不畅也可能引发。某些疾病如睡眠呼吸暂停综合征，以及药物副作用，像部分抗抑郁药、降压药也可能是诱因。\n
·生活方式：作息不规律，经常熬夜或昼夜颠倒，会影响生物钟。睡前接触恐怖刺激的内容，如看恐怖电影、玩恐怖游戏，大脑易将这些情节转化为梦魇。",
		2:"·心理治疗：认知行为疗法可帮助患者改变对梦魇的看法，重新塑造梦境结局。心理动力疗法挖掘潜意识冲突，眼动脱敏再处理疗法用于创伤引起的梦魇，减轻情绪反应。\n
·改善睡眠习惯和环境：营造安静、黑暗、温度适宜的睡眠环境。建立规律作息，睡前避免电子设备、剧烈运动，可进行放松活动。\n
·药物治疗：若是药物副作用引起，可调整药物。也能在医生指导下使用助眠药物改善睡眠，但要注意副作用和成瘾性。"
	},
	3:{
		0:"夜惊症是一种睡眠障碍，主要发生在儿童时期，也有少部分成人会出现。\n\n患者在睡眠中会突然惊醒，常伴有尖叫、哭喊、惊恐表情等强烈情绪反应，还可能出现心跳加快、呼吸急促、出汗等生理现象。\n\n此时患者意识不清，很难被唤醒，即使被唤醒也会感到困惑、迷茫，而且对发作过程通常没有记忆。",
		1:"·生理因素：儿童大脑发育尚未成熟，神经系统的调节功能不够完善，容易出现夜惊。另外，睡眠不足、过度疲劳、发烧等情况也可能诱发夜惊。\n
·心理因素：压力、焦虑、恐惧等情绪问题可能是原因之一。例如，孩子白天受到惊吓，或者生活环境发生较大变化（如搬家、父母离异等），都可能导致夜惊。",
		2:"·调整生活习惯：保证孩子有规律的作息时间，充足的睡眠。避免白天过度疲劳或兴奋，睡前避免激烈活动和刺激性的视听内容。\n
·改善睡眠环境：保持卧室安静、舒适、温度适宜，减少可能引起夜惊的外部因素。\n
·心理安抚：父母在孩子夜惊发作时，不要过度惊慌。可以在旁边轻声安慰，但尽量不要强行唤醒孩子，让孩子自然平静下来。如果夜惊是由心理因素引起，需要给予孩子足够的安全感，缓解其心理压力。一般随着年龄增长，大脑发育成熟，夜惊症大多会自然消失。如果夜惊频繁发作且严重影响生活，建议寻求专业医生的帮助。"
	},
	4:{
		0:"梦游症也叫睡行症，是一种睡眠障碍。患者在睡眠过程中会突然起床行走，或进行一些复杂的行为，比如穿衣、进食等。\n\n他们的眼睛通常是睁开的，但表情茫然，对周围环境反应迟钝，而且很难被唤醒。\n\n梦游行为通常发生在睡眠的前 1/3 阶段，即非快速眼动睡眠的深睡期。",
		1:"·遗传因素：梦游症有一定的家族遗传性，如果家族中有梦游症患者，个体发病的风险会相对较高。\n
·睡眠因素：睡眠剥夺、过度疲劳、睡眠质量差等情况容易诱发梦游。例如，长期熬夜或者睡眠环境不佳的人可能会出现梦游现象。\n
·心理因素：压力、焦虑等情绪问题可能会引发梦游。如经历了重大的生活事件或者长期处于紧张的心理状态下，大脑在睡眠中可能会出现异常行为。\n
·其他因素：药物、酒精等也可能与梦游症有关。某些用于治疗精神疾病的药物副作用可能会增加梦游的风险，睡前饮酒也可能导致梦游。",
		2:"·安全保障：对于偶尔发作的梦游症，主要是保证患者的安全，如清除卧室周围的障碍物、锁好门窗等，防止患者在梦游过程中受伤。\n
·改善睡眠：养成良好的睡眠习惯，保证充足的睡眠时间，提高睡眠质量。保持规律的作息时间，营造安静、舒适的睡眠环境。\n
·心理调节和治疗：对于因心理因素引起的梦游，可以进行心理疏导，缓解压力和焦虑情绪。如果梦游频繁发作，可能需要在医生指导下使用药物，如苯二氮䓬类药物来治疗。
"
	},
	5:{
		0:"睡眠呼吸暂停低通气综合征是一种睡眠障碍。患者在睡眠中会反复出现呼吸暂停（呼吸停止时间≥10 秒）和通气不足的情况。\n\n这会导致血液中的氧气含量降低，二氧化碳潴留，进而引起睡眠结构紊乱，患者常伴有打鼾、白天嗜睡、乏力等症状。",
		1:"·上呼吸道解剖结构异常：如鼻息肉、鼻中隔偏曲、腺样体肥大、扁桃体肥大等，这些会使上呼吸道变窄，气流受阻，引发呼吸暂停。\n
·肥胖：颈部脂肪堆积会压迫气道，增加气道阻力。而且肥胖者体内的激素变化等也可能影响呼吸调节。\n
·神经系统调节异常：大脑对呼吸肌的控制出现问题，使得呼吸肌在睡眠时不能正常工作，导致呼吸暂停。\n
·饮酒和药物：饮酒、服用某些镇静催眠药物等会使咽喉部肌肉松弛，气道更容易塌陷，从而诱发该病。",
		2:"·一般治疗：减肥是肥胖患者的重要治疗手段。改变睡眠姿势，尽量侧卧，避免仰卧，可减少气道塌陷。戒烟戒酒，避免使用镇静催眠药物。\n
·口腔矫治器：通过佩戴口腔矫治器，使下颌和舌体向前移，从而扩大上呼吸道。适用于轻、中度患者。\n
·持续气道正压通气治疗（CPAP）：患者睡觉时佩戴鼻面罩，机器提供持续的气道正压，保持气道开放。这是中、重度患者的常用有效治疗方法。\n
·手术治疗：对于存在上呼吸道解剖结构异常的患者，可考虑进行手术，如腺样体切除术、扁桃体切除术等，来改善通气。"
	},
	6:{
		0:"嗜睡症是一种过度的白天睡眠或睡眠发作的疾病。\n\n患者会在白天出现难以控制的困倦，经常毫无预兆地入睡，这种睡眠发作可能发生在各种场合，如吃饭、工作、开车时，严重影响正常生活和工作。\n\n并且，夜间睡眠可能也无法让患者感到精力恢复。",
		1:"·遗传因素：部分嗜睡症有家族遗传倾向，某些基因的突变可能导致大脑调节睡眠 - 觉醒周期的功能异常。\n
·脑部神经递质异常：下丘脑分泌素这种神经递质的缺乏被认为是主要原因之一。它在维持觉醒状态中起关键作用，缺乏时就容易引起嗜睡。\n
·心理因素：长期的压力、焦虑、抑郁等情绪问题，以及突然遭受重大的心理创伤，都可能引发嗜睡症。\n
·其他因素：如睡眠习惯不良、长期睡眠不足、头部受伤、某些药物副作用（如抗组胺药、抗癫痫药）也可能和嗜睡症有关。",
		2:"·药物治疗：主要使用兴奋剂类药物，如莫达非尼，来帮助患者保持清醒，改善白天嗜睡的状况。对于有猝倒症状（情绪激动时突然瘫软）的患者，还会使用抗抑郁药物来缓解。\n
·调整生活方式：建立规律的作息时间，保证充足的夜间睡眠，避免熬夜。白天适当进行一些体育活动，如散步、慢跑，来提高身体的兴奋性。\n
·心理治疗：针对心理因素引起的嗜睡症，采用认知行为疗法，帮助患者调整心态，缓解压力和不良情绪，从而改善嗜睡症状。"
	},
	7:{
		0:"发作性睡病是一种慢性睡眠障碍。主要特征为不可抗拒的短期睡眠发作，白天过度嗜睡，这种睡眠发作常常毫无征兆，可在吃饭、走路、工作等各种日常活动中突然发生。\n\n患者还可能出现猝倒现象，即强烈情绪（如大笑、愤怒）刺激下，突然肌肉无力而摔倒。\n\n此外，还可能伴有睡眠瘫痪和入睡前幻觉等症状。",
		1:"·遗传因素：发作性睡病具有一定的遗传易感性，研究表明部分基因与该病有关，家族中有发作性睡病患者会增加个体发病风险。\n
·神经递质失衡：下丘脑分泌素（也叫食欲素）的缺乏是关键因素。这种神经递质对维持觉醒和调节睡眠周期起重要作用，缺乏时会导致睡眠 - 觉醒状态失控。\n
·自身免疫因素：可能是自身免疫系统错误地攻击了产生下丘脑分泌素的神经元，使下丘脑分泌素减少，从而引发疾病。",
		2:"·药物治疗：\n
兴奋剂类药物：如莫达非尼、哌甲酯，可改善白天嗜睡状况，帮助患者保持清醒。\n
抗猝倒药物：文拉法辛、氟西汀等抗抑郁药物能有效减少猝倒发作的频率。\n
·生活方式调整：保持规律作息，保证充足的夜间睡眠。合理安排小憩时间，例如在白天适当安排几次短时间的小睡，每次 10 - 15 分钟，有助于缓解疲劳和嗜睡。\n
·心理支持：患者可能因为疾病产生心理压力和社交障碍，心理支持和疏导能帮助患者更好地面对疾病，增强生活信心。
"
	},
	8:{
		0:"快速眼动睡眠行为障碍是一种睡眠障碍，主要发生在快速眼动（REM）睡眠期。\n\n患者会将梦境中的动作通过肢体表现出来，如拳打脚踢、翻滚、大声喊叫等，动作可能比较剧烈，会对自身或者同床者造成伤害，而且患者在发作后通常能部分回忆起梦境内容。",
		1:"·神经系统病变：大脑中控制运动抑制的脑桥神经元功能出现异常是主要原因之一。像某些神经系统退行性疾病，如帕金森病、多系统萎缩等，可能导致这种神经元功能受损。\n
·药物因素：一些抗抑郁药物，尤其是选择性 5 - 羟色胺再摄取抑制剂（SSRI）等，可能会诱发快速眼动睡眠行为障碍。\n
·酒精戒断：长期饮酒后突然戒酒，大脑神经调节功能紊乱，也有可能引发这种睡眠障碍。",
		2:"·环境调整：保证睡眠环境安全，如在床边放置柔软的垫子，移走尖锐、坚硬的物品，避免患者在发作时受伤。\n
·药物治疗：\n
氯硝西泮：是治疗该障碍的有效药物，能够抑制 REM 睡眠期的肌肉活动，减少发作频率和严重程度。\n
褪黑素：对于部分患者，褪黑素也有一定的治疗效果，可以调节睡眠周期和减少异常行为。\n
·治疗基础疾病：如果是由神经系统退行性疾病引起的，需要对这些基础疾病进行治疗，以缓解睡眠障碍。同时，在使用可能诱发该障碍的药物时，应谨慎评估风险。"
	},
	9:{
		0:"磨牙症是指人在睡眠或清醒时，无意识地上下牙齿彼此磨动或紧咬的行为。\n\n这种磨动频率不一，可能会发出嘎吱嘎吱的声音，长期磨牙会对牙齿、颞下颌关节等口腔结构造成损害。",
		1:"·心理因素：压力和焦虑是常见原因。例如，工作压力大、面临考试或生活中的重大事件时，人们可能会通过磨牙来释放紧张情绪。情绪激动、愤怒等也可能引发磨牙。\n
·咬合因素：牙齿排列不齐、缺牙、假牙不合适等咬合问题，会导致牙齿在睡眠中自动寻找合适的咬合位置，从而引起磨牙。\n
·生活习惯和其他因素：长期吸烟、酗酒、喝大量咖啡等可能加重磨牙症状。另外，睡眠障碍、肠道寄生虫感染（如蛔虫）也可能与磨牙有关。",
		2:"·心理调节：对于由心理因素引起的磨牙症，可通过放松训练来缓解压力。如深呼吸、瑜伽、冥想等，也可以找心理医生进行咨询，帮助调整情绪。\n
·口腔矫治：如果是咬合问题，可采用口腔正畸治疗来矫正牙齿排列不齐。同时，使用咬合垫也是常用的方法，它可以在夜间睡觉时佩戴，隔开上下牙齿，避免牙齿直接接触、磨动，保护牙齿和颞下颌关节。\n
·改善生活习惯：保持良好的作息，避免过度劳累。减少吸烟、饮酒和咖啡的摄入。如果怀疑有肠道寄生虫，可就医检查，在医生指导下驱虫。"
	}
}

var disease:Dictionary = {
	0:"游戏概要",
	1:"失眠症",
	2:"梦魇",
	3:"夜惊症",
	4:"梦游症",
	5:"睡眠呼吸暂停低通气综合征",
	6:"嗜睡症",
	7:"发作性睡病",
	8:"快速眼动睡眠行为障碍",
	9:"磨牙症"
}

func _ready() -> void:
	load_text(0,0)

var sub_title:Array = ["定义与症状：\n\n","病因：\n\n","治疗方法：\n\n"]
var sub:Array = ["游戏主题:\n\n","操作方法:\n\n","游戏目标:\n\n"]
func load_text(a:int,b:int):
	if 0<=page and page<=page_max and 0<=part and part<=part_max:
		text = "[center][font_size=16]%s[/font_size][/center]\n\n"%disease[a] + sub_title[b] + book[a][b]
		if part == 0:
			text = "[center][font_size=16]%s[/font_size][/center]\n\n"%disease[a] + sub[b] + book[a][b]


func _on_right_button_down() -> void:
	$"../left".visible = true
	if 0<=page and page<=page_max and 0<=part and part<=part_max:
		if page!=page_max:
			page += 1
			if page == page_max and part == part_max:
				$"../right".visible = false
		elif part<part_max:
			page = 0
			part += 1
	load_text(part,page)

func _on_left_button_down() -> void:
	$"../right".visible = true
	if 0<=page and page<=page_max and 0<=part and part<=part_max:
		if page!=0:
			page -= 1
			if page == 0 and part == 0:
				$"../left".visible = false
		elif part>0:
			page = 2
			part -= 1
	load_text(part,page)
